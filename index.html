<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>파이썬 복습 게임 - 아이돌 & 방탈출</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      line-height: 1.6;
      padding: 16px;
      max-width: 900px;
      margin: 0 auto;
    }
    h1, h2, h3 {
      margin-top: 1.4em;
    }
    .chapter {
      border: 1px solid #ccc;
      padding: 12px 16px;
      margin-bottom: 20px;
      border-radius: 8px;
    }
    .stage {
      border-top: 1px dashed #ddd;
      padding-top: 10px;
      margin-top: 10px;
    }
    .code {
      background: #f5f5f5;
      padding: 8px 10px;
      border-radius: 4px;
      font-family: "Fira Code", Consolas, monospace;
      white-space: pre-wrap;
    }
    .question {
      margin: 8px 0;
      padding: 8px 10px;
      background: #fafafa;
      border-radius: 6px;
      border: 1px solid #eee;
    }
    .result {
      margin-top: 10px;
      font-weight: bold;
    }
    button {
      margin-top: 8px;
      padding: 6px 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>파이썬 복습 게임 🎮</h1>
  <p>
    수업이 끝난 뒤, 이 페이지를 보면서 <strong>파이썬(Jupyter) 수업 내용을 복습</strong해 보세요.<br>
    각 챕터는 원하는 만큼 다시 실행하면서 즐겨도 됩니다.
  </p>

  <hr>

  <!-- ===================== 챕터 1: 아이돌 스토리북 ===================== -->
  <div class="chapter" id="chapter1">
    <h2>📙 챕터 1. 아이돌 데이터 스토리북</h2>
    <p>
      너는 이제 <strong>신인 아이돌 그룹의 멤버</strong>입니다.<br>
      우리 그룹의 노래가 얼마나 사랑받고 있는지, <strong>데이터와 그래프</strong>로 확인해보세요!<br>
      Jupyter에서 코드를 직접 실행해보고, 아래 문제도 풀어보세요.
    </p>

    <!-- Stage 1 -->
    <div class="stage">
      <h3>Stage 1. 일별 스트리밍 그래프 그리기</h3>
      <p>
        아래는 우리 그룹의 <strong>타이틀곡(TITLE)과 수록곡(B-SIDE)의 일별 스트리밍 수</strong>입니다.
        이 데이터를 Jupyter에 복사해서 그래프를 직접 그려보세요.
      </p>

      <div class="code">
import pandas as pd
import matplotlib.pyplot as plt

data = {
    "day": ["월", "화", "수", "목", "금", "토", "일"] * 2,
    "song": ["TITLE"] * 7 + ["B-SIDE"] * 7,
    "streams": [100, 150, 180, 200, 300, 350, 400,
                80, 90, 120, 130, 160, 170, 200]
}

df = pd.DataFrame(data)
print(df.head())
      </div>

      <p><strong>미션 1-1.</strong> 타이틀곡만 골라서 일별 스트리밍 그래프를 그려보세요.</p>
      <div class="code">
# TODO: 'TITLE'만 골라서 df_title에 담아보세요.
df_title = df[df["song"] == "TITLE"]

plt.plot(df_title["day"], df_title["streams"])
plt.title("우리 그룹 타이틀곡 일별 스트리밍")
plt.xlabel("요일")
plt.ylabel("스트리밍 수")
plt.show()
      </div>

      <div class="question" data-type="mc" data-answer="2">
        <p><strong>[Q1]</strong> 그래프를 사용하는 가장 큰 이유는 무엇일까요?</p>
        <label><input type="radio" name="c1_q1" value="1"> 숫자를 숨기기 위해</label><br>
        <label><input type="radio" name="c1_q1" value="2"> 변화를 한눈에 보기 위해</label><br>
        <label><input type="radio" name="c1_q1" value="3"> 컴퓨터를 헷갈리게 하기 위해</label>
      </div>
    </div>

    <!-- Stage 2 -->
    <div class="stage">
      <h3>Stage 2. 같은 데이터끼리 묶어보기 (groupby 개념)</h3>
      <p>
        이번에는 요일별로 스트리밍 수를 모아보고 싶습니다.  
        즉, <strong>'같은 요일'끼리 데이터를 묶어서 합계</strong>를 내는 것입니다.
      </p>

      <div class="code">
# 요일별 스트리밍 합계 구하기
streams_by_day = df.groupby("day")["streams"].sum()
print(streams_by_day)

# 막대 그래프로 그리기
streams_by_day.plot(kind="bar")
plt.title("요일별 전체 스트리밍 합계")
plt.xlabel("요일")
plt.ylabel("스트리밍 수")
plt.show()
      </div>

      <div class="question" data-type="mc" data-answer="1">
        <p><strong>[Q2]</strong> 위 코드에서 <code>groupby("day")</code>가 하는 일과 가장 가까운 설명은?</p>
        <label><input type="radio" name="c1_q2" value="1">
          같은 요일끼리 데이터를 묶어서 합계를 구한다
        </label><br>
        <label><input type="radio" name="c1_q2" value="2">
          데이터를 전부 삭제한다
        </label><br>
        <label><input type="radio" name="c1_q2" value="3">
          요일 이름을 전부 영어로 바꾼다
        </label>
      </div>

      <div class="question" data-type="short" data-answer="groupby">
        <p><strong>[Q3]</strong>  
          파이썬에서 "어떤 기준으로 데이터를 묶어서 계산"할 때 자주 쓰는 함수 이름은 무엇일까요?<br>
          (힌트: <code>df.________("day")</code> 형태로 썼습니다.)
        </p>
        <input type="text" placeholder="소문자로 입력" />
      </div>
    </div>

    <!-- Stage 3 -->
    <div class="stage">
      <h3>Stage 3. 자동 차트 생성 버튼 만들기 (함수 복습)</h3>
      <p>
        같은 코드를 계속 반복해서 쓰는 대신, <strong>함수(function)</strong>를 만들어  
        <strong>버튼처럼 한 번에 실행</strong>할 수 있습니다.
      </p>

      <div class="code">
def plot_song(df, song_name):
    song_df = df[df["song"] == song_name]
    plt.plot(song_df["day"], song_df["streams"])
    plt.title(f"{song_name} 일별 스트리밍")
    plt.xlabel("요일")
    plt.ylabel("스트리밍 수")
    plt.show()

# 사용 예시
plot_song(df, "TITLE")
plot_song(df, "B-SIDE")
      </div>

      <div class="question" data-type="mc" data-answer="3">
        <p><strong>[Q4]</strong> 위 코드에서 <code>plot_song</code>은 어떤 역할을 하나요?</p>
        <label><input type="radio" name="c1_q4" value="1">
          데이터를 삭제하는 함수
        </label><br>
        <label><input type="radio" name="c1_q4" value="2">
          요일 이름을 바꾸는 함수
        </label><br>
        <label><input type="radio" name="c1_q4" value="3">
          노래 이름을 넣으면 자동으로 그래프를 그려주는 함수
        </label>
      </div>

      <div class="question" data-type="text">
        <p><strong>[Q5]</strong>  
          만약 너라면, 우리 그룹용 자동 차트 생성기에 어떤 이름을 붙이고 싶나요?<br>
          예시: <code>idol_chart_auto()</code>, <code>my_group_report()</code> 등
          (자유롭게 적어보세요. 자동 채점은 하지 않습니다 😊)
        </p>
        <textarea rows="2" style="width: 100%;" placeholder="함수 이름을 상상해서 적어보세요"></textarea>
      </div>
    </div>

    <button onclick="checkChapter('chapter1')">챕터 1 점수 확인하기</button>
    <div class="result" id="chapter1_result"></div>
  </div>

  <!-- ===================== 챕터 2: 방탈출 퍼즐 ===================== -->
  <div class="chapter" id="chapter2">
    <h2>📘 챕터 2. 데이터 퍼즐 방탈출 연구소</h2>
    <p>
      이번에는 <strong>정규식, 배열/NumPy, 인덱싱, 슬라이싱</strong>을 복습하는 챕터입니다.<br>
      너는 비밀 연구소에 초대된 연구원이며, 각 퍼즐을 풀어 <strong>방을 탈출</strong>해야 합니다.
    </p>

    <!-- Stage 1: 정규식 -->
    <div class="stage">
      <h3>Stage 1. 정규식으로 숨겨진 전화번호 찾기</h3>
      <p>아래 코드를 Jupyter에서 실행해보고, 정규식이 무엇을 하는지 확인해보세요.</p>

      <div class="code">
import re

text = "문의: 010-1234-5678 / 비상연락망: 010-9999-8888"

phones = re.findall(r"\d{3}-\d{4}-\d{4}", text)
print(phones)
      </div>

      <div class="question" data-type="mc" data-answer="2">
        <p><strong>[Q6]</strong> 위 정규식 <code>\d{3}-\d{4}-\d{4}</code>는 어떤 패턴을 찾는 걸까요?</p>
        <label><input type="radio" name="c2_q6" value="1">
          숫자 3개만 찾는다
        </label><br>
        <label><input type="radio" name="c2_q6" value="2">
          000-0000-0000 형태의 전화번호를 찾는다
        </label><br>
        <label><input type="radio" name="c2_q6" value="3">
          영어 알파벳만 찾는다
        </label>
      </div>
    </div>

    <!-- Stage 2: 배열/인덱싱 -->
    <div class="stage">
      <h3>Stage 2. 배열의 중앙 값을 찾아라 (NumPy + 인덱싱)</h3>
      <p>아래 배열에서 중앙에 있는 값을 인덱싱으로 꺼내보세요.</p>

      <div class="code">
import numpy as np

arr = np.array([[1,2,3],
                [4,5,6],
                [7,8,9]])

# TODO: 중앙 값(5)을 인덱싱으로 꺼내서 answer에 넣어보세요.
answer = arr[1, 1]
print(answer)
      </div>

      <div class="question" data-type="mc" data-answer="3">
        <p><strong>[Q7]</strong> 중앙 값 5를 가져오기 위한 올바른 인덱싱은?</p>
        <label><input type="radio" name="c2_q7" value="1"> <code>arr[0, 0]</code></label><br>
        <label><input type="radio" name="c2_q7" value="2"> <code>arr[2, 2]</code></label><br>
        <label><input type="radio" name="c2_q7" value="3"> <code>arr[1, 1]</code></label>
      </div>
    </div>

    <!-- Stage 3: 슬라이싱 -->
    <div class="stage">
      <h3>Stage 3. 슬라이싱으로 ESCAPE 만들기</h3>
      <p>
        아래 문자열 <code>secret</code>에서 슬라이싱을 사용해 <strong>"ESCAPE"</strong>를 뽑아내는 코드를 만들어보세요.
      </p>

      <div class="code">
secret = "DATA_ESCAPE_ROOM"

# TODO: 슬라이싱으로 "ESCAPE"만 잘라서 answer에 넣어보세요.
answer = secret[5:11]
print(answer)  # ESCAPE
      </div>

      <div class="question" data-type="short" data-answer="secret[5:11]">
        <p><strong>[Q8]</strong>  
          위 코드에서 <strong>"ESCAPE"</strong>만 가져오기 위한 슬라이싱 표현을 정확히 적어보세요.<br>
          예시 형식: <code>secret[0:4]</code>
        </p>
        <input type="text" placeholder="예: secret[5:11]" />
      </div>
    </div>

    <button onclick="checkChapter('chapter2')">챕터 2 점수 확인하기</button>
    <div class="result" id="chapter2_result"></div>
  </div>

  <script>
    function checkChapter(chapterId) {
      const chapter = document.getElementById(chapterId);
      const questions = chapter.querySelectorAll('.question');
      let total = 0;
      let correct = 0;

      questions.forEach(q => {
        const type = q.getAttribute('data-type');
        const answer = q.getAttribute('data-answer');
        if (!answer) return; // 서술형 등 채점 안 하는 경우

        total += 1;

        if (type === 'mc') {
          const checked = q.querySelector('input[type="radio"]:checked');
          if (checked && checked.value === answer) {
            correct += 1;
          }
        } else if (type === 'short') {
          const input = q.querySelector('input[type="text"]');
          if (!input) return;
          const user = (input.value || "").trim();
          if (user === answer) {
            correct += 1;
          }
        }
        // data-type="text" 는 채점하지 않음
      });

      const resultEl = document.getElementById(chapterId + "_result");
      if (total === 0) {
        resultEl.textContent = "채점할 문제가 없습니다.";
      } else {
        resultEl.textContent = `정답: ${correct} / ${total} 문제`;
      }
    }
  </script>
</body>
</html>
